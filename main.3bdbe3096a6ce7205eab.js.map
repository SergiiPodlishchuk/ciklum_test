{"version":3,"sources":["webpack:///./index.js"],"names":["refs","table_calendar","document","querySelector","container","new_event","members","main_part_table","noButton","yesButton","confirm","events","renderCalendar","arr","arr_rows","i","time","filter","slice","tr_arr","dayCurent","day","find","tr","text","push","ddd","join","localStorage","getItem","JSON","parse","addEventListener","e","events_arr","participant","includes","target","value","console","log","innerHTML","insertAdjacentHTML","filterMembers","id","takeValue","domElem","keyObj","method","event_Data","form","input_members","arf","location","reload","event","preventDefault","closeAlert","alertWind","remove","setItem","stringify","submitEvent","type","timeEvent","offsetParent","split","dayEvent","deleteEvent","classList","arrfiltevent","add","activeElement","currentElement","contains","activeTime","activeDay","changeEvent","currentTime","currentDay"],"mappings":"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","file":"main.3bdbe3096a6ce7205eab.js","sourcesContent":["import './styles.css';\r\n\r\nconst refs = {\r\n  table_calendar: document.querySelector('.table_calendar'),\r\n  container: document.querySelector('.container'),\r\n  new_event: document.querySelector('#new_event'),\r\n  members: document.querySelector('#members'),\r\n  main_part_table: document.querySelector('.main_part_table'),\r\n  noButton: document.querySelector('#noButton'),\r\n  yesButton: document.querySelector('#yesButton'),\r\n  confirm: document.querySelector('#confirm_block'),\r\n};\r\n\r\nlet events = [];\r\n\r\nif (localStorage.getItem('events')) {\r\n  events = JSON.parse(localStorage.getItem('events'));\r\n}\r\n\r\nrefs.members.addEventListener('change', e => filterMembers(events, e));\r\n\r\nrefs.main_part_table.insertAdjacentHTML(\r\n  'beforeend',\r\n  renderCalendar(events).join(''),\r\n);\r\nrefs.container.addEventListener('click', renderForm_Add);\r\n\r\nrefs.table_calendar.addEventListener('click', delete_event);\r\n\r\nrefs.main_part_table.addEventListener('dragstart', e => {\r\n  e.target.classList.add(`selected`);\r\n});\r\n\r\nrefs.main_part_table.addEventListener('drop', onDrop);\r\n\r\nrefs.main_part_table.addEventListener('dragover', e => e.preventDefault());\r\n\r\nfunction filterMembers(events_arr, e) {\r\n  let filter;\r\n\r\n  filter = events_arr.filter(({ participant }) =>\r\n    participant.includes(e.target.value),\r\n  );\r\n  console.log(filter);\r\n\r\n  if (e.target.value === 'All_members') {\r\n    filter = events;\r\n  }\r\n\r\n  refs.main_part_table.innerHTML = '';\r\n\r\n  refs.main_part_table.insertAdjacentHTML(\r\n    'beforeend',\r\n    renderCalendar(filter).join(''),\r\n  );\r\n}\r\n\r\nfunction renderCalendar(arr) {\r\n  let arr_rows = [];\r\n  for (let i = 10; i <= 18; i++) {\r\n    const time = arr.filter(({ time }) => +time.slice(0, 2) === i);\r\n\r\n    const days = ['mon', 'tue', 'wed', 'thu', 'fri'];\r\n\r\n    let tr_arr = [];\r\n\r\n    for (const dayCurent of days) {\r\n      const day = time.find(({ day }) => day === dayCurent);\r\n\r\n      const tr = `<th class=\"point ${\r\n        day ? 'backGround' : ''\r\n      }\" id=\"cell_${i}_${dayCurent}\" draggable=\"true\">\r\n        ${day ? `${day.text}<button type=\"button\">X</button>` : ''}\r\n      </th>\r\n    `;\r\n      tr_arr.push(tr);\r\n    }\r\n\r\n    const ddd = `\r\n        <tr>\r\n          <th class=\"time\">${i}:00</th>\r\n          ${tr_arr.join('')}\r\n        </tr>\r\n    `;\r\n\r\n    arr_rows.push(ddd);\r\n  }\r\n\r\n  return arr_rows;\r\n}\r\n\r\nfunction renderForm_Add(e) {\r\n  if (e.target.id === 'new_event') {\r\n    refs.container.innerHTML = '';\r\n    refs.container.insertAdjacentHTML('beforeend', renderForm());\r\n\r\n    const form = document.querySelector('#form_create_event');\r\n    const text = document.querySelector('#text_event');\r\n    const participant = document.querySelector('#participants');\r\n    const day = document.querySelector('#dayId');\r\n    const time = document.querySelector('#timeId');\r\n    const input_members = document.querySelector('#members_list');\r\n\r\n    const event_Data = {\r\n      text: '',\r\n      participant: participant.value,\r\n      day: day.value,\r\n      time: time.value,\r\n    };\r\n    let arf = [];\r\n    participant.addEventListener('change', e => {\r\n      arf.push(e.target.value);\r\n      input_members.value = arf;\r\n      event_Data.participant = [...arf];\r\n    });\r\n\r\n    function takeValue(domElem, keyObj, method) {\r\n      domElem.addEventListener(method, e => {\r\n        let value = e.target.value;\r\n\r\n        event_Data[keyObj] = value;\r\n      });\r\n    }\r\n\r\n    takeValue(text, 'text', 'input');\r\n    takeValue(day, 'day', 'click');\r\n    takeValue(time, 'time', 'click');\r\n\r\n    form.addEventListener('click', e => {\r\n      if (e.target.id === 'cancel') {\r\n        location.reload();\r\n      }\r\n    });\r\n\r\n    form.addEventListener('submit', e => submitEvent(event_Data, e));\r\n  }\r\n}\r\n\r\nfunction submitEvent(event_Data, e) {\r\n  const eventAgain = events.find(\r\n    event => event.time === event_Data.time && event.day === event_Data.day,\r\n  );\r\n  if (eventAgain) {\r\n    e.preventDefault();\r\n    const alert = `\r\n    <div class=\"alert\">\r\n        <div class=\"big_red_x\">x</div>\r\n        <p class=\"alert_text\">Failed to create an event. Time slot is already booked</p>\r\n        <button type=\"button\" class=\"close_alert\">x</button>\r\n    </div>`;\r\n\r\n    refs.container.insertAdjacentHTML('beforebegin', alert);\r\n    const closeAlert = document.querySelector('.close_alert');\r\n    const alertWind = document.querySelector('.alert');\r\n    closeAlert.addEventListener('click', () => {\r\n      alertWind.remove();\r\n    });\r\n    return;\r\n  }\r\n  events.push(event_Data);\r\n  localStorage.setItem('events', JSON.stringify(events));\r\n  // history.back();\r\n  location.reload();\r\n}\r\n\r\nfunction renderForm() {\r\n  return `\r\n        <form action=\"create\" id=\"form_create_event\">\r\n        <label for=\"\"> Name of the event:\r\n          <input type=\"text\" id=\"text_event\">\r\n        </label>\r\n    \r\n        <label for=\"\"> Participants:\r\n        <input type=\"text\" id=\"members_list\">\r\n          <select name=\"participant\" id=\"participants\" required >\r\n            <option value=\"Maria\">Maria</option>\r\n            <option value=\"Bob\">Bob</option>\r\n            <option value=\"Alex\">Alex</option>\r\n          </select>\r\n        </label>\r\n        <label for=\"\"> Day:\r\n          <select form=\"form_create_event\" name=\"day\" id=\"dayId\" required>\r\n            <option value=\"mon\">Monday</option>\r\n            <option value=\"tue\">Tuesday</option>\r\n            <option value=\"wed\">Wednesday</option>\r\n            <option value=\"thu\">Thursday</option>\r\n            <option value=\"fri\">Friday</option>\r\n          </select>\r\n        </label>\r\n        <label for=\"\">Time:\r\n          <select name=\"time\" id=\"timeId\" required>\r\n            <option value=\"10_00\">10:00</option>\r\n            <option value=\"11_00\">11:00</option>\r\n            <option value=\"12_00\">12:00</option>\r\n            <option value=\"13_00\">13:00</option>\r\n            <option value=\"14_00\">14:00</option>\r\n            <option value=\"15_00\">15:00</option>\r\n            <option value=\"16_00\">16:00</option>\r\n            <option value=\"17_00\">17:00</option>\r\n            <option value=\"18_00\">18:00</option>\r\n          </select>\r\n        </label>\r\n\r\n        <div class=\"buttons\">\r\n            <button type=\"button\" id=\"cancel\">Cancel</button>\r\n            <button type=\"submit\" id=\"create\">Create</button>\r\n        </div>\r\n\r\n      </form>\r\n    `;\r\n}\r\n\r\nfunction delete_event(e) {\r\n  if (e.target.type === 'button') {\r\n    const timeEvent = e.target.offsetParent.id.split('_')[1];\r\n    const dayEvent = e.target.offsetParent.id.split('_')[2];\r\n\r\n    const deleteEvent = events.find(\r\n      event => event.time.split('_')[0] === timeEvent && event.day === dayEvent,\r\n    );\r\n\r\n    refs.confirm.classList.remove('displayNone');\r\n\r\n    refs.yesButton.addEventListener('click', e => {\r\n      const arrfiltevent = events.filter(event => event !== deleteEvent);\r\n      localStorage.setItem('events', JSON.stringify(arrfiltevent));\r\n      location.reload();\r\n    });\r\n    refs.noButton.addEventListener('click', e => {\r\n      refs.confirm.classList.add('displayNone');\r\n    });\r\n  }\r\n}\r\n\r\nfunction onDrop(e) {\r\n  e.preventDefault();\r\n\r\n  const activeElement = refs.main_part_table.querySelector(`.selected`);\r\n  const currentElement = e.target;\r\n  const isMoveable =\r\n    activeElement !== currentElement &&\r\n    currentElement.classList.contains(`point`);\r\n  if (!isMoveable) {\r\n    return;\r\n  }\r\n\r\n  const activeTime = activeElement.id.split('_')[1];\r\n  const activeDay = activeElement.id.split('_')[2];\r\n\r\n  const changeEvent = events.find(\r\n    event => event.time.split('_')[0] === activeTime && event.day === activeDay,\r\n  );\r\n\r\n  const arrfiltevent = events.filter(event => event !== changeEvent);\r\n\r\n  const currentTime = `${currentElement.id.split('_')[1]}_00`;\r\n  const currentDay = currentElement.id.split('_')[2];\r\n\r\n  changeEvent.time = currentTime;\r\n  changeEvent.day = currentDay;\r\n\r\n  arrfiltevent.push(changeEvent);\r\n  console.log(arrfiltevent);\r\n  localStorage.setItem('events', JSON.stringify(arrfiltevent));\r\n\r\n  activeElement.classList.remove(`selected`);\r\n  location.reload();\r\n}\r\n"],"sourceRoot":""}