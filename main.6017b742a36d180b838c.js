(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{L1EO:function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("hi3g"),n("lYjL"),n("IlJM"),n("IvQZ"),n("8cZI"),n("WB5j"),n("Muwe"),n("4NM0"),n("aZFp"),n("L1EO");var i={table_calendar:document.querySelector(".table_calendar"),container:document.querySelector(".container"),new_event:document.querySelector("#new_event"),members:document.querySelector("#members"),main_part_table:document.querySelector(".main_part_table"),noButton:document.querySelector("#noButton"),yesButton:document.querySelector("#yesButton"),confirm:document.querySelector("#confirm_block")},a=[];function o(e){for(var t=[],n=function(n){for(var i=e.filter((function(e){return+e.time.slice(0,2)===n})),a=[],o=function(){var e=l[r],t=i.find((function(t){return t.day===e})),o='<th class="point '+(t?"backGround":"")+'" id="cell_'+n+"_"+e+'" draggable="true">\n        '+(t?t.text+'<button type="button">X</button>':"")+"\n      </th>\n    ";a.push(o)},r=0,l=["mon","tue","wed","thu","fri"];r<l.length;r++)o();var c='\n        <tr>\n          <th class="time">'+n+":00</th>\n          "+a.join("")+"\n        </tr>\n    ";t.push(c)},i=10;i<=18;i++)n(i);return t}localStorage.getItem("events")&&(a=JSON.parse(localStorage.getItem("events"))),i.members.addEventListener("change",(function(e){return function(e,t){var n;n=e.filter((function(e){return e.participant.includes(t.target.value)})),"All_members"===t.target.value&&(n=a);i.main_part_table.innerHTML="",i.main_part_table.insertAdjacentHTML("beforeend",o(n).join(""))}(a,e)})),i.main_part_table.insertAdjacentHTML("beforeend",o(a).join("")),i.container.addEventListener("click",(function(e){if("new_event"===e.target.id){var t=function(e,t,n){e.addEventListener(n,(function(e){var n=e.target.value;d[t]=n}))};i.container.innerHTML="",i.container.insertAdjacentHTML("beforeend",'\n        <form action="create" id="form_create_event">\n        <label for=""> Name of the event:\n          <input type="text" id="text_event">\n        </label>\n    \n        <label for=""> Participants:\n        <input type="text" id="members_list">\n          <select name="participant" id="participants" required >\n            <option value="Maria">Maria</option>\n            <option value="Bob">Bob</option>\n            <option value="Alex">Alex</option>\n          </select>\n        </label>\n        <label for=""> Day:\n          <select form="form_create_event" name="day" id="dayId" required>\n            <option value="mon">Monday</option>\n            <option value="tue">Tuesday</option>\n            <option value="wed">Wednesday</option>\n            <option value="thu">Thursday</option>\n            <option value="fri">Friday</option>\n          </select>\n        </label>\n        <label for="">Time:\n          <select name="time" id="timeId" required>\n            <option value="10_00">10:00</option>\n            <option value="11_00">11:00</option>\n            <option value="12_00">12:00</option>\n            <option value="13_00">13:00</option>\n            <option value="14_00">14:00</option>\n            <option value="15_00">15:00</option>\n            <option value="16_00">16:00</option>\n            <option value="17_00">17:00</option>\n            <option value="18_00">18:00</option>\n          </select>\n        </label>\n\n        <div class="buttons">\n            <button type="button" id="cancel">Cancel</button>\n            <button type="submit" id="create">Create</button>\n        </div>\n\n      </form>\n    ');var n=document.querySelector("#form_create_event"),o=document.querySelector("#text_event"),r=document.querySelector("#participants"),l=document.querySelector("#dayId"),c=document.querySelector("#timeId"),u=document.querySelector("#members_list"),d={text:"",participant:r.value,day:l.value,time:c.value},s=[];r.addEventListener("change",(function(e){s.push(e.target.value),u.value=s,d.participant=[].concat(s)})),t(o,"text","input"),t(l,"day","click"),t(c,"time","click"),n.addEventListener("click",(function(e){"cancel"===e.target.id&&console.dir(document.body.firstElementChild.innerHTML)})),n.addEventListener("submit",(function(e){return function(e,t){if(a.find((function(t){return t.time===e.time&&t.day===e.day}))){t.preventDefault();i.container.insertAdjacentHTML("beforebegin",'\n    <div class="alert">\n        <div class="big_red_x">x</div>\n        <p class="alert_text">Failed to create an event. Time slot is already booked</p>\n        <button type="button" class="close_alert">x</button>\n    </div>');var n=document.querySelector(".close_alert"),o=document.querySelector(".alert");return void n.addEventListener("click",(function(){o.remove()}))}a.push(e),localStorage.setItem("events",JSON.stringify(a))}(d,e)}))}})),i.table_calendar.addEventListener("click",(function(e){if("button"===e.target.type){i.confirm.classList.remove("displayNone");var t=e.target.offsetParent.id.split("_")[1],n=e.target.offsetParent.id.split("_")[2],r=a.find((function(e){return e.time.split("_")[0]===t&&e.day===n})),l=a.filter((function(e){return e!==r}));i.confirm.addEventListener("click",(function(e){"yesButton"===e.target.id?(a=l,localStorage.setItem("events",JSON.stringify(a)),i.main_part_table.innerHTML="",i.main_part_table.insertAdjacentHTML("beforeend",o(l).join("")),i.confirm.classList.add("displayNone")):"noButton"===e.target.id&&i.confirm.classList.add("displayNone")}))}})),i.main_part_table.addEventListener("dragstart",(function(e){e.target.classList.add("selected")})),i.main_part_table.addEventListener("drop",(function(e){e.preventDefault();var t=i.main_part_table.querySelector(".selected"),n=e.target;if(t===n||!n.classList.contains("point"))return;var r=t.id.split("_")[1],l=t.id.split("_")[2],c=a.find((function(e){return e.time.split("_")[0]===r&&e.day===l})),u=a.filter((function(e){return e!==c})),d=n.id.split("_")[1]+"_00",s=n.id.split("_")[2];c.time=d,c.day=s,u.push(c),localStorage.setItem("events",JSON.stringify(u)),t.classList.remove("selected"),i.main_part_table.innerHTML="",i.main_part_table.insertAdjacentHTML("beforeend",o(u).join(""))})),i.main_part_table.addEventListener("dragover",(function(e){return e.preventDefault()}))}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.6017b742a36d180b838c.js.map