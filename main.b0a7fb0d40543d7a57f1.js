(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{L1EO:function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("hi3g"),n("lYjL"),n("IlJM"),n("IvQZ"),n("8cZI"),n("WB5j"),n("Muwe"),n("4NM0"),n("aZFp"),n("L1EO");var o={table_calendar:document.querySelector(".table_calendar"),container:document.querySelector(".container"),new_event:document.querySelector("#new_event"),members:document.querySelector("#members"),main_part_table:document.querySelector(".main_part_table"),noButton:document.querySelector("#noButton"),yesButton:document.querySelector("#yesButton"),confirm:document.querySelector("#confirm_block")},i=[];function a(e){for(var t=[],n=function(n){for(var o=e.filter((function(e){return+e.time.slice(0,2)===n})),i=[],a=function(){var e=l[r],t=o.find((function(t){return t.day===e})),a='<th class="point '+(t?"backGround":"")+'" id="cell_'+n+"_"+e+'" draggable="true">\n        '+(t?t.text+'<button type="button">X</button>':"")+"\n      </th>\n    ";i.push(a)},r=0,l=["mon","tue","wed","thu","fri"];r<l.length;r++)a();var c='\n        <tr>\n          <th class="time">'+n+":00</th>\n          "+i.join("")+"\n        </tr>\n    ";t.push(c)},o=10;o<=18;o++)n(o);return t}localStorage.getItem("events")&&(i=JSON.parse(localStorage.getItem("events"))),o.members.addEventListener("change",(function(e){return function(e,t){var n;n=e.filter((function(e){return e.participant.includes(t.target.value)})),console.log(n),"All_members"===t.target.value&&(n=i);o.main_part_table.innerHTML="",o.main_part_table.insertAdjacentHTML("beforeend",a(n).join(""))}(i,e)})),o.main_part_table.insertAdjacentHTML("beforeend",a(i).join("")),o.container.addEventListener("click",(function(e){if("new_event"===e.target.id){var t=function(e,t,n){e.addEventListener(n,(function(e){var n=e.target.value;d[t]=n}))};o.container.innerHTML="",o.container.insertAdjacentHTML("beforeend",'\n        <form action="create" id="form_create_event">\n        <label for=""> Name of the event:\n          <input type="text" id="text_event">\n        </label>\n    \n        <label for=""> Participants:\n        <input type="text" id="members_list">\n          <select name="participant" id="participants" required >\n            <option value="Maria">Maria</option>\n            <option value="Bob">Bob</option>\n            <option value="Alex">Alex</option>\n          </select>\n        </label>\n        <label for=""> Day:\n          <select form="form_create_event" name="day" id="dayId" required>\n            <option value="mon">Monday</option>\n            <option value="tue">Tuesday</option>\n            <option value="wed">Wednesday</option>\n            <option value="thu">Thursday</option>\n            <option value="fri">Friday</option>\n          </select>\n        </label>\n        <label for="">Time:\n          <select name="time" id="timeId" required>\n            <option value="10_00">10:00</option>\n            <option value="11_00">11:00</option>\n            <option value="12_00">12:00</option>\n            <option value="13_00">13:00</option>\n            <option value="14_00">14:00</option>\n            <option value="15_00">15:00</option>\n            <option value="16_00">16:00</option>\n            <option value="17_00">17:00</option>\n            <option value="18_00">18:00</option>\n          </select>\n        </label>\n\n        <div class="buttons">\n            <button type="button" id="cancel">Cancel</button>\n            <button type="submit" id="create">Create</button>\n        </div>\n\n      </form>\n    ');var n=document.querySelector("#form_create_event"),a=document.querySelector("#text_event"),r=document.querySelector("#participants"),l=document.querySelector("#dayId"),c=document.querySelector("#timeId"),u=document.querySelector("#members_list"),d={text:"",participant:r.value,day:l.value,time:c.value},s=[];r.addEventListener("change",(function(e){s.push(e.target.value),u.value=s,d.participant=[].concat(s)})),t(a,"text","input"),t(l,"day","click"),t(c,"time","click"),n.addEventListener("click",(function(e){"cancel"===e.target.id&&location.reload()})),n.addEventListener("click",(function(e){"create"===e.target.id&&function(e,t){if(i.find((function(t){return t.time===e.time&&t.day===e.day}))){t.preventDefault();o.container.insertAdjacentHTML("beforebegin",'\n    <div class="alert">\n        <div class="big_red_x">x</div>\n        <p class="alert_text">Failed to create an event. Time slot is already booked</p>\n        <button type="button" class="close_alert">x</button>\n    </div>');var n=document.querySelector(".close_alert"),a=document.querySelector(".alert");return void n.addEventListener("click",(function(){a.remove()}))}i.push(e),localStorage.setItem("events",JSON.stringify(i)),history.back()}(d,e)}))}})),o.table_calendar.addEventListener("click",(function(e){if("button"===e.target.type){var t=e.target.offsetParent.id.split("_")[1],n=e.target.offsetParent.id.split("_")[2],a=i.find((function(e){return e.time.split("_")[0]===t&&e.day===n}));o.confirm.classList.remove("displayNone"),o.yesButton.addEventListener("click",(function(e){var t=i.filter((function(e){return e!==a}));localStorage.setItem("events",JSON.stringify(t)),location.reload()})),o.noButton.addEventListener("click",(function(e){o.confirm.classList.add("displayNone")}))}})),o.main_part_table.addEventListener("dragstart",(function(e){e.target.classList.add("selected")})),o.main_part_table.addEventListener("drop",(function(e){e.preventDefault();var t=o.main_part_table.querySelector(".selected"),n=e.target;if(t===n||!n.classList.contains("point"))return;var a=t.id.split("_")[1],r=t.id.split("_")[2],l=i.find((function(e){return e.time.split("_")[0]===a&&e.day===r})),c=i.filter((function(e){return e!==l})),u=n.id.split("_")[1]+"_00",d=n.id.split("_")[2];l.time=u,l.day=d,c.push(l),console.log(c),localStorage.setItem("events",JSON.stringify(c)),t.classList.remove("selected"),location.reload()})),o.main_part_table.addEventListener("dragover",(function(e){return e.preventDefault()}))}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.b0a7fb0d40543d7a57f1.js.map